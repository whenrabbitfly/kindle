<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Kindle Dashboard (Upside Down Text Only)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #fff;
    color: #000;
    font-family: Arial, "PingFang SC", "Microsoft Yahei", sans-serif;
  }

  /* 整页保持竖屏，但内容倒立（180°） → 不会触发 Kindle 缩小 */
  .flip {
    transform: rotate(180deg);
    -webkit-transform: rotate(180deg);
    width: 100%;
    text-align: center;
  }

  .city {
    font-size: 38px;
    font-weight: bold;
    margin-top: 20px;
    letter-spacing: 3px;
  }

  .date {
    font-size: 24px;
    margin-top: 8px;
  }

  .divider {
    width: 88%;
    margin: 14px auto;
    border-top: 1px solid #000;
  }

  .temp {
    font-size: 48px;
    font-weight: bold;
    margin-bottom: 4px;
  }

  .weather-desc {
    font-size: 26px;
  }

  .weather-extra {
    font-size: 18px;
    opacity: 0.8;
    margin-top: 4px;
  }

  .quote-main {
    font-size: 26px;
    margin-top: 14px;
  }
  .quote-sub {
    font-size: 18px;
    opacity: 0.8;
  }

  /* 世界时钟卡片（大号） */
  .world-title {
    font-size: 24px;
    margin-top: 12px;
  }

  .world-grid {
    width: 90%;
    margin: 10px auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }

  .card {
    width: 46%;
    border: 1px solid #000;
    padding: 10px 0;
    margin-bottom: 10px;
  }

  .card-city {
    font-size: 18px;
    opacity: 0.7;
  }

  .card-time {
    font-size: 32px;
    font-weight: bold;
    margin-top: 4px;
  }

  .card-offset {
    font-size: 14px;
    opacity: 0.7;
    margin-top: 2px;
  }

  .footer {
    margin-top: 10px;
    font-size: 14px;
    opacity: 0.6;
  }
</style>
</head>

<body>
<div class="flip">
  <!-- 城市 + 日期 -->
  <div class="city">MANCHESTER</div>
  <div class="date" id="date">Loading…</div>

  <div class="divider"></div>

  <!-- 天气 -->
  <div id="weather-loading">加载天气中…( ´•̥̥̥ω•̥̥̥` )</div>

  <div id="weather" style="display:none;">
    <div class="temp" id="temp"></div>
    <div class="weather-desc" id="wdesc"></div>
    <div class="weather-extra" id="wextra"></div>
  </div>

  <div class="divider"></div>

  <!-- 诗句 -->
  <div class="quote-main">不要温和地走进那个良夜 (ง •̀_•́)ง</div>
  <div class="quote-sub">——《星际穿越》 Do not go gentle into that good night</div>

  <div class="divider"></div>

  <!-- 世界时间 -->
  <div class="world-title">World Time</div>

  <div class="world-grid">
    <div class="card">
      <div class="card-city">London</div>
      <div class="card-time" id="t-lon">--:--</div>
      <div class="card-offset">UTC +0</div>
    </div>

    <div class="card">
      <div class="card-city">Beijing</div>
      <div class="card-time" id="t-bj">--:--</div>
      <div class="card-offset">UTC +8</div>
    </div>

    <div class="card">
      <div class="card-city">Toronto</div>
      <div class="card-time" id="t-tor">--:--</div>
      <div class="card-offset">UTC −5</div>
    </div>

    <div class="card">
      <div class="card-city">Tokyo</div>
      <div class="card-time" id="t-tyo">--:--</div>
      <div class="card-offset">UTC +9</div>
    </div>
  </div>

  <div class="footer">把 Kindle 倒过来看就是正的 ( •̀ ω •́ )✧</div>
</div>

<script>
function pad(n){return n<10?"0"+n:n;}

(function(){
  var d=new Date();
  var w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
  document.getElementById("date").textContent=
    d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())+" "+w[d.getDay()];
})();

function desc(code){
  if(code===0) return "晴";
  if(code===1||code===2) return "少云";
  if(code===3) return "多云";
  if(code>=51&&code<=67) return "毛毛雨";
  if(code>=80&&code<=82) return "阵雨";
  if(code>=95) return "雷暴";
  return "天气";
}

(function loadWx(){
  var x=new XMLHttpRequest();
  x.open("GET",
    "https://api.open-meteo.com/v1/forecast?latitude=53.48&longitude=-2.24&current_weather=true",
    true);
  x.onreadystatechange=function(){
    if(x.readyState===4){
      if(x.status===200){
        try{
          var d=JSON.parse(x.responseText).current_weather;
          document.getElementById("temp").textContent=Math.round(d.temperature)+"°C";
          document.getElementById("wdesc").textContent=desc(d.weathercode);
          document.getElementById("wextra").textContent="风速 "+d.windspeed+" km/h";
          document.getElementById("weather-loading").style.display="none";
          document.getElementById("weather").style.display="block";
        }catch(e){
          document.getElementById("weather-loading").textContent="天气解析失败";
        }
      }else{
        document.getElementById("weather-loading").textContent="天气加载失败 ("+x.status+")";
      }
    }
  };
  x.send();
})();

function updateWorld(){
  var now=new Date();
  var utc=now.getTime()+now.getTimezoneOffset()*60000;
  function at(h){
    var d=new Date(utc+h*3600000);
    return pad(d.getHours())+":"+pad(d.getMinutes());
  }
  document.getElementById("t-lon").textContent=at(0);
  document.getElementById("t-bj").textContent=at(8);
  document.getElementById("t-tor").textContent=at(-5);
  document.getElementById("t-tyo").textContent=at(9);
}

updateWorld();
setInterval(updateWorld,60000);
</script>

</body>
</html>
