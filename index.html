<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Kindle Landscape Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="1800">

<style>
  body {
    margin: 0;
    padding: 20px 32px;
    background: #fff;
    color: #000;
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, "PingFang SC", "Microsoft Yahei", sans-serif;
    line-height: 1.5;
  }
  .container {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
  }

  /* 顶部标题行：城市 + 日期 + 小表情 */
  .top-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
  }

  .city {
    font-size: 34px;
    font-weight: bold;
    letter-spacing: 2px;
  }

  .date {
    font-size: 26px;
  }

  .emoji {
    font-size: 24px;
    opacity: 0.7;
  }

  .divider {
    border-top: 2px solid #000;
    margin: 10px 0 24px 0;
  }

  /* 中间内容：天气左，诗句右 */
  .middle-row {
    display: flex;
    justify-content: space-between;
    gap: 20px;
  }

  .weather-block {
    flex: 1;
    text-align: left;
    padding-left: 10px;
  }

  .temp-main {
    font-size: 48px;
    font-weight: bold;
    margin-bottom: 6px;
  }

  .weather-desc {
    font-size: 24px;
    margin-bottom: 4px;
  }

  .weather-extra {
    font-size: 20px;
    opacity: 0.75;
  }

  .quote-block {
    flex: 1;
    text-align: right;
    padding-right: 10px;
  }

  .quote-main {
    font-size: 28px;
    font-weight: bold;
  }

  .quote-sub {
    font-size: 20px;
    opacity: 0.7;
    margin-top: 6px;
  }

  /* 世界时钟横排 */
  .worldtime-title {
    margin-top: 26px;
    font-size: 24px;
    text-align: center;
  }

  .worldtime-row {
    margin-top: 12px;
    display: flex;
    justify-content: space-around;
    font-size: 22px;
    font-variant-numeric: tabular-nums;
  }

  .footer-note {
    margin-top: 22px;
    text-align: center;
    font-size: 16px;
    opacity: 0.6;
  }
</style>
</head>
<body>
<div class="container">

  <div class="top-row">
    <div class="city">MANCHESTER</div>
    <div class="emoji">(๑•̀ㅂ•́)و✧</div>
    <div class="date" id="dateRow">Loading...</div>
  </div>

  <div class="divider"></div>

  <div class="middle-row">
    <!-- 天气 -->
    <div class="weather-block">
      <div id="weatherLoading">加载天气中… (´･ω･`)</div>
      <div id="weatherContent" style="display:none;">
        <div class="temp-main" id="tempNow"></div>
        <div class="weather-desc" id="weatherDesc"></div>
        <div class="weather-extra" id="weatherExtra"></div>
      </div>
    </div>

    <!-- 诗句 -->
    <div class="quote-block">
      <div class="quote-main">不要温和地走进那个良夜 (ง •̀_•́)ง</div>
      <div class="quote-sub">—— 《星际穿越》 Do not go gentle into that good night</div>
    </div>
  </div>

  <div class="divider"></div>

  <div class="worldtime-title">World Time ｡ﾟ(ﾟ´▽`ﾟ)ﾟ｡</div>
  <div class="worldtime-row">
    <div>London<br><span id="time-lon">--:--</span></div>
    <div>Beijing<br><span id="time-bj">--:--</span></div>
    <div>Toronto<br><span id="time-tor">--:--</span></div>
    <div>Tokyo<br><span id="time-tyo">--:--</span></div>
  </div>

  <div class="footer-note">
    页面每 30 分钟自动刷新一次 · 请保持 Wi-Fi 连接 (＝ω＝)
  </div>

</div>

<script>
  (function setDate() {
    const d = new Date();
    const w = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    document.getElementById("dateRow").textContent =
      `${d.getFullYear()}-${("0"+(d.getMonth()+1)).slice(-2)}-${("0"+d.getDate()).slice(-2)} ${w[d.getDay()]}`;
  })();

  const weatherUrl="https://api.open-meteo.com/v1/forecast?latitude=53.48&longitude=-2.24&current_weather=true";

  function desc(code){
    if(code===0) return "Clear sky / 晴";
    if(code===1||code===2) return "Partly cloudy / 少云";
    if(code===3) return "Cloudy / 多云";
    if(code>=51&&code<=67) return "Drizzle / 毛毛雨";
    if(code>=80&&code<=82) return "Rain showers / 阵雨";
    if(code>=95) return "Thunderstorm / 雷暴";
    return "Weather / 天气";
  }

  fetch(weatherUrl).then(r=>r.json()).then(data=>{
    if(!data||!data.current_weather){
      document.getElementById("weatherLoading").textContent="无法获取天气 (╥﹏╥)";
      return;
    }
    let cw=data.current_weather;
    document.getElementById("tempNow").textContent = Math.round(cw.temperature)+"°C";
    document.getElementById("weatherDesc").textContent = desc(cw.weathercode);
    document.getElementById("weatherExtra").textContent = "风速: "+Math.round(cw.windspeed)+" km/h";
    weatherLoading.style.display="none";
    weatherContent.style.display="block";
  });

  function pad(n){ return (n<10?"0"+n:n); }
  function updateTime(){
    let now=new Date();
    let utc = now.getTime()+now.getTimezoneOffset()*60000;
    function t(h){
      let d=new Date(utc+h*3600000);
      return pad(d.getHours())+":"+pad(d.getMinutes());
    }
    time-lon.textContent=t(0);
    time-bj.textContent=t(8);
    time-tor.textContent=t(-5);
    time-tyo.textContent=t(9);
  }
  updateTime();
  setInterval(updateTime,60000);
</script>

</body>
</html>
